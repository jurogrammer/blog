{{- define "main" -}}
<section class="tg-page" data-team-generator>
  <div class="tg-shell section_gutter">
    <div class="tg-layout-header">
      <h1 class="tg-layout-headline">Random Team Generator:</h1>
      <aside class="tg-layout-buttons tg-layout-buttons--top" aria-label="Quick actions">
        <button type="button" class="tg-button-icon" data-action="rerun" aria-label="Shuffle again">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M12 5V1L7 6l5 5V7c2.76 0 5 2.24 5 5a5 5 0 0 1-8.66 3.54l-1.42 1.42A7 7 0 1 0 12 5z" />
          </svg>
          <span>Rerun</span>
        </button>
        <div class="tg-settings-tooltip-container">
          <button type="button" class="tg-button-icon" data-action="edit" aria-label="Edit categories">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M19.14 12.94a7.43 7.43 0 0 0 .05-.94 7.43 7.43 0 0 0-.05-.94l2.03-1.58a.5.5 0 0 0 .12-.63l-1.92-3.32a.5.5 0 0 0-.6-.22l-2.39.96a7.09 7.09 0 0 0-1.63-.94l-.36-2.54a.5.5 0 0 0-.49-.42h-3.84a.5.5 0 0 0-.49.42l-.36 2.54a7.09 7.09 0 0 0-1.63.94l-2.39-.96a.5.5 0 0 0-.6.22L2.68 8.85a.5.5 0 0 0 .12.63l2.03 1.58a7.43 7.43 0 0 0-.05.94 7.43 7.43 0 0 0 .05.94l-2.03 1.58a.5.5 0 0 0-.12.63l1.92 3.32a.5.5 0 0 0 .6.22l2.39-.96c.5.38 1.04.69 1.63.94l.36 2.54a.5.5 0 0 0 .49.42h3.84a.5.5 0 0 0 .49-.42l.36-2.54c.59-.25 1.13-.56 1.63-.94l2.39.96a.5.5 0 0 0 .6-.22l1.92-3.32a.5.5 0 0 0-.12-.63l-2.03-1.58zM12 15.5A3.5 3.5 0 1 1 12 8a3.5 3.5 0 0 1 0 7.5z" />
            </svg>
            <span>Edit</span>
          </button>
          <div class="tg-settings-tooltip" data-role="edit-tooltip">Edit categories!</div>
        </div>
      </aside>
    </div>

    <div class="tg-stage" id="team-stage" aria-live="polite">
      <div class="tg-stage-groups" id="group-results" role="list"></div>
    </div>
    <p class="tg-error" id="team-error" role="alert" hidden></p>

    <aside class="tg-layout-buttons tg-layout-buttons--bottom" aria-label="Result actions">
      <button type="button" class="tg-button-icon" data-action="rerun" aria-label="Shuffle again">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M12 5V1L7 6l5 5V7c2.76 0 5 2.24 5 5a5 5 0 0 1-8.66 3.54l-1.42 1.42A7 7 0 1 0 12 5z" />
        </svg>
        <span>Rerun</span>
      </button>
      <button type="button" class="tg-button-icon" data-action="edit" aria-label="Edit categories">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M19.14 12.94a7.43 7.43 0 0 0 .05-.94 7.43 7.43 0 0 0-.05-.94l2.03-1.58a.5.5 0 0 0 .12-.63l-1.92-3.32a.5.5 0 0 0-.6-.22l-2.39.96a7.09 7.09 0 0 0-1.63-.94l-.36-2.54a.5.5 0 0 0-.49-.42h-3.84a.5.5 0 0 0-.49.42l-.36 2.54a7.09 7.09 0 0 0-1.63.94l-2.39-.96a.5.5 0 0 0-.6.22L2.68 8.85a.5.5 0 0 0 .12.63l2.03 1.58a7.43 7.43 0 0 0-.05.94 7.43 7.43 0 0 0 .05.94l-2.03 1.58a.5.5 0 0 0-.12.63l1.92 3.32a.5.5 0 0 0 .6.22l2.39-.96c.5.38 1.04.69 1.63.94l.36 2.54a.5.5 0 0 0 .49.42h3.84a.5.5 0 0 0 .49-.42l.36-2.54c.59-.25 1.13-.56 1.63-.94l2.39.96a.5.5 0 0 0 .6-.22l1.92-3.32a.5.5 0 0 0-.12-.63l-2.03-1.58zM12 15.5A3.5 3.5 0 1 1 12 8a3.5 3.5 0 0 1 0 7.5z" />
        </svg>
        <span>Edit</span>
      </button>
      <button type="button" class="tg-button-icon" data-action="copy" aria-label="Copy results">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M16 1H4a2 2 0 0 0-2 2v12h2V3h12V1zm3 4H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2zm0 16H8V7h11v14z" />
        </svg>
        <span>Copy</span>
      </button>
      <button type="button" class="tg-button-icon" data-action="reset" aria-label="Reset">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M13 3a9 9 0 1 0 8.95 10h-2.02A7 7 0 1 1 13 5v3l4-4-4-4v3z" />
        </svg>
        <span>Reset</span>
      </button>
    </aside>

    <div class="tg-layout-bottom">
      <div class="tg-layout-settings" id="settings-panel">
        <h2>Edit Settings</h2>
        <p>
          <label for="dataset-select">Dataset:</label>
          <select id="dataset-select">
            <option selected>Team Generator</option>
          </select>
        </p>

        <form id="team-generator-form" novalidate>
          <div class="tg-categories-field">
            <label for="categories-container">Categories</label>
            <div id="categories-container" class="tg-categories" aria-live="polite"></div>
            <button type="button" class="tg-button-secondary" id="add-category-btn">+ Add Category</button>
          </div>
          <p>
            <label for="mode-select">Mode</label>
            <select id="mode-select" name="mode">
              <option value="team-count">Split by number of teams</option>
              <option value="team-size">Split by members per team</option>
            </select>
          </p>
          <p id="team-count-row" data-mode-field="team-count">
            <label for="team-count-input">Groups</label>
            <input id="team-count-input" name="teamCount" type="number" min="1" step="1" inputmode="numeric">
          </p>
          <p id="team-size-row" data-mode-field="team-size" hidden>
            <label for="team-size-input">Members per team</label>
            <input id="team-size-input" name="teamSize" type="number" min="1" step="1" inputmode="numeric">
          </p>
          <p>
            <label class="tg-checkbox-row" for="remove-duplicates">
              <input id="remove-duplicates" name="removeDuplicates" type="checkbox">
              Remove duplicate names
            </label>
          </p>
          <button type="submit" class="tg-button-primary">Randomize</button>
        </form>
      </div>

      <div class="tg-layout-copy">
        <h2>How to create randomized groups</h2>
        <p>
          Enter participants in one or more categories, then choose the amount of groups (or members per group) and
          click randomize.
        </p>
        <p>
          Each category is shuffled independently and distributed round-robin so categories are spread across teams as
          evenly as possible.
        </p>
        <p>
          Results stay on this device using local storage, so a refresh keeps your latest names and options.
        </p>
        <h3>Want something similar?</h3>
        <p>
          Try pairing mode by choosing members per team as <strong>2</strong>, or keep using group count mode when you
          need larger teams.
        </p>
      </div>
    </div>
  </div>
</section>

<script type="module" src="{{ "tools/team-generator/app.js" | relURL }}"></script>
{{- end -}}
